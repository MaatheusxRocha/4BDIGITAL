!function(t){"use strict";t.event.special.destroyed||(t.event.special.destroyed={remove:function(t){t.handler&&t.handler()}}),t.fn.extend({maxlength:function(e,a){function n(t){var a=t.val();a=a.replace(new RegExp("\r?\n","g"),"\n");return e.utf8?s(t.val()):t.val().length}function o(t,e){var a=t.val();t.val(a.substr(0,e))}function s(t){for(var e=0,a=0;a<t.length;a++){var n=t.charCodeAt(a);128>n?e++:e+=n>127&&2048>n?2:3}return e}function i(t,a,o){var s=!0;return!e.alwaysShow&&o-n(t)>a&&(s=!1),s}function r(t,e){return e-n(t)}function l(t){t.css({display:"block"})}function c(t){t.css({display:"none"})}function h(t,a){var n="";return e.message?n=e.message.replace("%charsTyped%",a).replace("%charsRemaining%",t-a).replace("%charsTotal%",t):(e.preText&&(n+=e.preText),n+=e.showCharsTyped?a:t-a,e.showMaxLength&&(n+=e.separator+t),e.postText&&(n+=e.postText)),n}function p(t,a,n,o){o.html(h(n,n-t)),t>0?i(a,e.threshold,n)?l(o.removeClass(e.limitReachedClass).addClass(e.warningClass)):c(o):l(o.removeClass(e.warningClass).addClass(e.limitReachedClass))}function f(e){var a=e[0];return t.extend({},"function"==typeof a.getBoundingClientRect?a.getBoundingClientRect():{width:a.offsetWidth,height:a.offsetHeight},e.offset())}function d(t,a){var n=f(t),o=t.outerWidth(),s=a.outerWidth(),i=a.width(),r=a.height();switch(e.appendToParent&&(n.top-=t.parent().offset().top,n.left-=t.parent().offset().left),e.placement){case"bottom":a.css({top:n.top+n.height,left:n.left+n.width/2-i/2});break;case"top":a.css({top:n.top-r,left:n.left+n.width/2-i/2});break;case"left":a.css({top:n.top+n.height/2-r/2,left:n.left-i});break;case"right":a.css({top:n.top+n.height/2-r/2,left:n.left+n.width});break;case"bottom-right":a.css({top:n.top+n.height,left:n.left+n.width});break;case"top-right":a.css({top:n.top-r,left:n.left+o});break;case"top-left":a.css({top:n.top-r,left:n.left-s});break;case"bottom-left":a.css({top:n.top+t.outerHeight(),left:n.left-s});break;case"centered-right":a.css({top:n.top+r/2,left:n.left+o-s-3});break;case"bottom-right-inside":a.css({top:n.top+n.height,left:n.left+n.width-s});break;case"top-right-inside":a.css({top:n.top-r,left:n.left+o-s});break;case"top-left-inside":a.css({top:n.top-r,left:n.left});break;case"bottom-left-inside":a.css({top:n.top+t.outerHeight(),left:n.left})}}function u(t){return t.attr("maxlength")||t.attr("size")}var g=t("body"),m={showOnReady:!1,alwaysShow:!1,threshold:10,warningClass:"label label-success",limitReachedClass:"label label-important label-danger",separator:" / ",preText:"",postText:"",showMaxLength:!0,placement:"bottom",showCharsTyped:!0,validate:!1,utf8:!1,appendToParent:!1};return t.isFunction(e)&&!a&&(a=e,e={}),e=t.extend(m,e),this.each(function(){function a(){var a=h(n,"0");n=u(i),s||(s=t('<span class="bootstrap-maxlength"></span>').css({display:"none",position:"absolute",whiteSpace:"nowrap",zIndex:1099}).html(a)),i.is("textarea")&&(i.data("maxlenghtsizex",i.outerWidth()),i.data("maxlenghtsizey",i.outerHeight()),i.mouseup(function(){(i.outerWidth()!==i.data("maxlenghtsizex")||i.outerHeight()!==i.data("maxlenghtsizey"))&&d(i,s),i.data("maxlenghtsizex",i.outerWidth()),i.data("maxlenghtsizey",i.outerHeight())})),e.appendToParent?(i.parent().append(s),i.parent().css("position","relative")):g.append(s),p(r(i,u(i)),i,n,s),d(i,s)}var n,s,i=t(this);t(window).resize(function(){s&&d(i,s)}),e.showOnReady?i.ready(function(){a()}):i.focus(function(){a()}),i.on("destroyed",function(){s&&s.remove()}),i.on("blur",function(){s&&!e.showOnReady&&s.remove()}),i.on("input",function(){var t=u(i),a=r(i,t),l=!0;return e.validate&&0>a?(o(i,t),l=!1):p(a,i,n,s),("bottom-right-inside"===e.placement||"top-right-inside"===e.placement)&&d(i,s),l})})}})}(jQuery);